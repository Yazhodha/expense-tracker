(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{72399:function(e,t,n){Promise.resolve().then(n.bind(n,73886))},73886:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var a=n(27573),s=n(7653),r=n(47164),i=n(14072),l=n(70142),c=n(98204),d=n(97455),o=n(44638),u=n(61638),m=n(26798),x=n(23727),h=n(18854),f=n(58248),p=n(12439),g=n(86331),y=n(64386);function j(){var e;let{user:t}=(0,o.a)(),{expenses:n,loading:j,summary:N}=(0,u.t)(),b=(0,s.useMemo)(()=>{if(!t)return[];let e=new Map;return n.forEach(n=>{let a=t.settings.categories.find(e=>e.id===n.category);if(a){let t=e.get(a.id)||{name:a.name,icon:a.icon,total:0,count:0};e.set(a.id,{...t,total:t.total+n.amount,count:t.count+1})}}),Array.from(e.values()).sort((e,t)=>t.total-e.total)},[n,t]),v=(0,s.useMemo)(()=>{let e=new Date;return(function(e,t){var n;let{start:a,end:s}=(0,i.T)(void 0,e),r=+a>+s,c=r?+a:+s,d=r?s:a;d.setHours(0,0,0,0);let o=(n=void 0,1);if(!o)return[];o<0&&(o=-o,r=!r);let u=[];for(;+d<=c;)u.push((0,l.L)(a,d)),d.setDate(d.getDate()+o),d.setHours(0,0,0,0);return r?u.reverse():u})({start:new Date(e.getTime()-5184e5),end:e}).map(e=>{let t=n.filter(t=>new Date(t.date).toDateString()===e.toDateString());return{date:e,total:t.reduce((e,t)=>e+t.amount,0),count:t.length}})},[n]),w=(0,s.useMemo)(()=>{let e=new Map;n.forEach(t=>{t.merchant&&e.set(t.merchant,(e.get(t.merchant)||0)+t.amount)});let t={name:"N/A",total:0};return e.forEach((e,n)=>{e>t.total&&(t={name:n,total:e})}),t},[n]),E=(0,s.useMemo)(()=>0===N.cycle.daysElapsed?0:Math.round(N.spent/N.cycle.daysElapsed),[N]);if(!t)return null;if(j)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});let D=(null===(e=b[0])||void 0===e?void 0:e.total)||1;return(0,a.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"pb-24 px-4 pt-4 max-w-md mx-auto space-y-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Insights"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(m.Zb,{children:(0,a.jsxs)(m.aY,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),(0,a.jsx)("p",{className:"text-sm",children:"Avg Daily"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[t.settings.currency,E.toLocaleString()]})]})}),(0,a.jsx)(m.Zb,{children:(0,a.jsxs)(m.aY,{className:"pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),(0,a.jsx)("p",{className:"text-sm",children:"Total Expenses"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:n.length})]})})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsx)(m.Ol,{children:(0,a.jsx)(m.ll,{children:"Spending by Category"})}),(0,a.jsx)(m.aY,{className:"space-y-4",children:0===b.length?(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"No expenses yet in this billing cycle."}):b.map(e=>{let n=g[e.icon]||y.Z,s=e.total/N.spent*100,r=e.total/D*100;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.name})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold",children:[t.settings.currency,e.total.toLocaleString()]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[s.toFixed(1),"%"]})]})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:"".concat(r,"%")}})}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.count," transaction",1!==e.count?"s":""]})]},e.name)})})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsx)(m.Ol,{children:(0,a.jsx)(m.ll,{children:"Last 7 Days"})}),(0,a.jsx)(m.aY,{children:(0,a.jsx)("div",{className:"space-y-3",children:v.map((e,n)=>{let s=Math.max(...v.map(e=>e.total),1),r=e.total/s*100,i=(0,c.z)(e.date);return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:i?"font-semibold":"text-muted-foreground",children:(0,d.WU)(e.date,"EEE, MMM d")}),(0,a.jsxs)("span",{className:"font-medium",children:[t.settings.currency,e.total.toLocaleString()]})]}),(0,a.jsx)("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full rounded-full transition-all ".concat(i?"bg-primary":"bg-primary/60"),style:{width:"".concat(r,"%")}})})]},n)})})})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsx)(m.Ol,{children:(0,a.jsx)(m.ll,{children:"Top Merchant"})}),(0,a.jsx)(m.aY,{children:"N/A"===w.name?(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"No merchant data available."}):(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-lg font-semibold",children:w.name}),(0,a.jsxs)("p",{className:"text-xl font-bold text-primary",children:[t.settings.currency,w.total.toLocaleString()]})]})})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsx)(m.Ol,{children:(0,a.jsx)(m.ll,{children:"Budget Health"})}),(0,a.jsxs)(m.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current Status"}),(0,a.jsx)("p",{className:"text-2xl font-bold ".concat(N.isOverBudget?"text-destructive":"text-green-600"),children:N.isOverBudget?"Over Budget":"On Track"})]}),N.isOverBudget?(0,a.jsx)(f.Z,{className:"w-8 h-8 text-destructive"}):(0,a.jsx)(p.Z,{className:"w-8 h-8 text-green-600"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Budget Used"}),(0,a.jsxs)("span",{className:"font-medium",children:[N.percentUsed.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Days Remaining"}),(0,a.jsxs)("span",{className:"font-medium",children:[N.cycle.daysRemaining," days"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Recommended Daily Budget"}),(0,a.jsxs)("span",{className:"font-medium",children:[t.settings.currency,N.dailyBudget.toLocaleString()]})]})]})]})]})]})}},44638:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return o},a:function(){return u}});var a=n(27573),s=n(7653),r=n(31523),i=n(96228),l=n(94328);let c={monthlyLimit:1e5,billingDate:15,currency:"Rs.",categories:[{id:"groceries",name:"Groceries",icon:"ShoppingCart",color:"bg-green-500"},{id:"dining",name:"Dining",icon:"Utensils",color:"bg-orange-500"},{id:"fuel",name:"Fuel",icon:"Fuel",color:"bg-blue-500"},{id:"shopping",name:"Shopping",icon:"ShoppingBag",color:"bg-pink-500"},{id:"subscriptions",name:"Subscriptions",icon:"CreditCard",color:"bg-purple-500"},{id:"health",name:"Health",icon:"Heart",color:"bg-red-500"},{id:"entertainment",name:"Entertainment",icon:"Gamepad2",color:"bg-indigo-500"},{id:"transport",name:"Transport",icon:"Car",color:"bg-cyan-500"},{id:"utilities",name:"Utilities",icon:"Zap",color:"bg-yellow-500"},{id:"other",name:"Other",icon:"MoreHorizontal",color:"bg-gray-500"}],notificationsEnabled:!0,alertThresholds:[50,75,90,100],theme:"system"},d=(0,s.createContext)(null);function o(e){let{children:t}=e,[n,o]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,r.Aj)(l.I8,async e=>{try{if(e){let t=await (0,i.QT)((0,i.JU)(l.db,"users",e.uid));if(t.exists())o({uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",settings:t.data().settings});else{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",settings:c};await (0,i.pl)((0,i.JU)(l.db,"users",e.uid),{settings:c,createdAt:new Date}),o(t)}}else o(null)}catch(e){console.error("Auth state change error:",e),o(null)}finally{m(!1)}});return()=>e()},[]);let x=async()=>{let e=new r.hJ;await (0,r.rh)(l.I8,e)},h=async()=>{await (0,r.w7)(l.I8)},f=async e=>{if(!n)return;let t={...n.settings,...e};await (0,i.pl)((0,i.JU)(l.db,"users",n.uid),{settings:t},{merge:!0}),o({...n,settings:t})};return(0,a.jsx)(d.Provider,{value:{user:n,loading:u,signIn:x,signOut:h,updateSettings:f},children:t})}let u=()=>{let e=(0,s.useContext)(d);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},26798:function(e,t,n){"use strict";n.d(t,{Ol:function(){return l},Zb:function(){return i},aY:function(){return d},ll:function(){return c}});var a=n(27573),s=n(7653),r=n(19369);let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow",n),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",n),...s})});l.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,r.cn)("font-semibold leading-none tracking-tight",n),...s})});c.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",n),...s})}).displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",n),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",n),...s})}).displayName="CardFooter"},61638:function(e,t,n){"use strict";n.d(t,{t:function(){return x}});var a=n(44638),s=n(7653),r=n(93881),i=n(57646),l=n(62899),c=n(88483),d=n(21939),o=n(80849),u=n(94328),m=n(72824);function x(){let{user:e}=(0,a.a)();return function(e){let[t,n]=(0,s.useState)([]),[a,x]=(0,s.useState)(!0),h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=(0,r.b)(t),a=(0,i.G)(n,e);(0,l.R)(n,a)&&(a=(0,c.z)(a,-1));let s=(0,d.i)((0,c.z)((0,i.G)(a,e),1));s.setDate(s.getDate()-1);let u=(0,o.j)(s,a)+1,m=(0,o.j)(n,a)+1;return{startDate:a,endDate:s,daysTotal:u,daysElapsed:m,daysRemaining:Math.max(0,u-m)}}((null==e?void 0:e.settings.billingDate)||15);(0,s.useEffect)(()=>{if(!e){n([]),x(!1);return}x(!0);let t=(0,u.EQ)(e.uid,h.startDate,h.endDate,e=>{n(e),x(!1)});return()=>t()},[e,h.startDate.getTime(),h.endDate.getTime()]);let f={cycle:h,spent:t.reduce((e,t)=>e+t.amount,0),limit:(null==e?void 0:e.settings.monthlyLimit)||1e5,remaining:0,percentUsed:0,dailyBudget:0,todaySpent:t.filter(e=>(0,m.z)(e.date)).reduce((e,t)=>e+t.amount,0),isOverBudget:!1};return f.remaining=f.limit-f.spent,f.percentUsed=f.spent/f.limit*100,f.dailyBudget=h.daysRemaining>0?Math.floor(f.remaining/h.daysRemaining):0,f.isOverBudget=f.remaining<0,{expenses:t,loading:a,summary:f,addExpense:(0,s.useCallback)(async t=>{if(!e)throw Error("Not authenticated");return(0,u.ai)(e.uid,t)},[e]),updateExpense:(0,s.useCallback)(async(e,t)=>(0,u.E)(e,t),[]),deleteExpense:(0,s.useCallback)(async e=>(0,u.vu)(e),[])}}(e)}},19369:function(e,t,n){"use strict";n.d(t,{cn:function(){return r}});var a=n(10607),s=n(25579);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,a.W)(t))}},94328:function(e,t,n){"use strict";n.d(t,{ai:function(){return o},I8:function(){return l},db:function(){return c},vu:function(){return m},EQ:function(){return x},E:function(){return u}});var a=n(42061),s=n(30801),r=n(90024);let i=0===(0,a.C6)().length?(0,a.ZF)({apiKey:"AIzaSyCV1t7oVNNZ2OA5gG3AlZIkL2mj9RGLIJY",authDomain:"spendwise-expense-tracker-app.firebaseapp.com",projectId:"spendwise-expense-tracker-app",storageBucket:"spendwise-expense-tracker-app.firebasestorage.app",messagingSenderId:"39820487912",appId:"1:39820487912:web:6c8ffc761a381cbb2e2d5d"}):(0,a.C6)()[0],l=(0,s.v0)(i),c=(0,r.ad)(i),d="expenses";async function o(e,t){let n={userId:e,amount:t.amount,category:t.category,merchant:t.merchant,source:t.source,date:r.EK.fromDate(t.date),createdAt:r.EK.now(),updatedAt:r.EK.now()};return t.note&&(n.note=t.note),(await (0,r.ET)((0,r.hJ)(c,d),n)).id}async function u(e,t){let n=(0,r.JU)(c,d,e),a={updatedAt:r.EK.now()};void 0!==t.amount&&(a.amount=t.amount),void 0!==t.category&&(a.category=t.category),void 0!==t.merchant&&(a.merchant=t.merchant),void 0!==t.source&&(a.source=t.source),void 0!==t.note&&t.note&&(a.note=t.note),t.date&&(a.date=r.EK.fromDate(t.date)),await (0,r.r7)(n,a)}async function m(e){await (0,r.oe)((0,r.JU)(c,d,e))}function x(e,t,n,a){let s=(0,r.IO)((0,r.hJ)(c,d),(0,r.ar)("userId","==",e),(0,r.Xo)("date","desc"));return(0,r.cf)(s,e=>{a(e.docs.map(e=>{let t=e.data();return{id:e.id,userId:t.userId,amount:t.amount,category:t.category,merchant:t.merchant,note:t.note,date:t.date.toDate(),createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),source:t.source}}).filter(e=>e.date>=t&&e.date<=n))})}}},function(e){e.O(0,[415,630,547,181,437,71,6,883,293,528,744],function(){return e(e.s=72399)}),_N_E=e.O()}]);