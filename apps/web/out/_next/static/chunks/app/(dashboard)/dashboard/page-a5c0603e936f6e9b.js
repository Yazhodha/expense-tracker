(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{70901:function(e,t,a){Promise.resolve().then(a.bind(a,55746))},55746:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ex}});var n=a(27573),s=a(7653),r=a(47164),o=a(17787),l=a(44638),d=a(61638),i=a(26798);function c(e){let{percent:t,size:a=200,strokeWidth:s=16}=e,o=(a-s)/2,l=2*o*Math.PI,d=l-Math.min(t,100)/100*l;return(0,n.jsxs)("div",{className:"relative",style:{width:a,height:a},children:[(0,n.jsxs)("svg",{className:"transform -rotate-90",width:a,height:a,children:[(0,n.jsx)("circle",{cx:a/2,cy:a/2,r:o,stroke:"currentColor",strokeWidth:s,fill:"none",className:"text-muted/20"}),(0,n.jsx)(r.E.circle,{cx:a/2,cy:a/2,r:o,strokeWidth:s,fill:"none",strokeLinecap:"round",className:t>=100?"stroke-red-500":t>=90?"stroke-red-400":t>=75?"stroke-orange-400":t>=50?"stroke-yellow-400":"stroke-green-500",initial:{strokeDashoffset:l},animate:{strokeDashoffset:d},transition:{duration:1,ease:"easeOut"},style:{strokeDasharray:l}})]}),(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,n.jsxs)(r.E.span,{className:"text-4xl font-bold",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:.5},children:[t<1&&t>0?t.toFixed(1):Math.round(t),"%"]}),(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"used"})]})]})}var u=a(3592),m=a(97455);function x(e){let{summary:t,currency:a="Rs."}=e,{cycle:s,spent:o,limit:l,remaining:d,percentUsed:x,dailyBudget:f}=t;return(0,n.jsx)(i.Zb,{className:"overflow-hidden",children:(0,n.jsxs)(i.aY,{className:"pt-6",children:[(0,n.jsxs)("div",{className:"text-center mb-4",children:[(0,n.jsxs)("h2",{className:"text-lg font-medium",children:[(0,m.WU)(s.startDate,"MMM d")," - ",(0,m.WU)(s.endDate,"MMM d")]}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current billing cycle"})]}),(0,n.jsx)("div",{className:"flex justify-center mb-6",children:(0,n.jsx)(c,{percent:x})}),(0,n.jsxs)("div",{className:"text-center space-y-1 mb-6",children:[(0,n.jsx)(r.E.p,{className:"text-3xl font-bold",initial:{opacity:0},animate:{opacity:1},children:(0,u.x)(o,a)}),(0,n.jsxs)("p",{className:"text-muted-foreground",children:["of ",(0,u.x)(l,a)]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-xl font-semibold ".concat(d<0?"text-red-500":""),children:(0,u.x)(Math.abs(d),a)}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:d<0?"over budget":"remaining"})]}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-xl font-semibold",children:(0,u.x)(f,a)}),(0,n.jsxs)("p",{className:"text-xs text-muted-foreground",children:["daily budget (",s.daysRemaining," days left)"]})]})]})]})})}var f=a(86331),p=a(64386);function g(e){let{expense:t,category:a,currency:s="Rs.",onEdit:o}=e,l=f[a.icon]||p.Z;return(0,n.jsxs)(r.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-3 py-3 px-1 hover:bg-muted/50 rounded-lg cursor-pointer transition-colors",onClick:()=>null==o?void 0:o(t),children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(a.color),children:(0,n.jsx)(l,{className:"w-5 h-5 text-white"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"font-medium truncate",children:t.merchant||a.name}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:t.note||(0,m.WU)(t.date,"h:mm a")})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"font-semibold",children:(0,u.x)(t.amount,s)}),"claude"===t.source&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"via Claude"})]})]})}var h=a(98204),y=a(69540);function b(e){let{expenses:t,categories:a,currency:o,onEditExpense:l}=e,d=(0,s.useMemo)(()=>{let e=new Map;return t.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).forEach(t=>{let a=(0,m.WU)(t.date,"yyyy-MM-dd"),n=e.get(a)||[];e.set(a,[...n,t])}),e},[t]),i=e=>a.find(t=>t.id===e)||a[a.length-1],c=e=>{let t=new Date(e);return(0,h.z)(t)?"Today":(0,y.g)(t)?"Yesterday":(0,m.WU)(t,"EEEE, MMM d")},x=e=>e.reduce((e,t)=>e+t.amount,0);return 0===t.length?(0,n.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,n.jsx)("p",{children:"No expenses yet"}),(0,n.jsx)("p",{className:"text-sm",children:"Tap + to add your first expense"})]}):(0,n.jsx)("div",{className:"space-y-6",children:Array.from(d.entries()).map(e=>{let[t,a]=e;return(0,n.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("h3",{className:"font-medium text-sm",children:c(t)}),(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,u.x)(x(a),o)})]}),(0,n.jsx)("div",{className:"bg-card rounded-lg border divide-y",children:a.map(e=>(0,n.jsx)(g,{expense:e,category:i(e.category),currency:o,onEdit:l},e.id))})]},t)})})}var j=a(7965),v=a(49289),N=a(19369);let w=j.fC,k=j.xz;j.x8;let E=j.h_,C=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(j.aV,{className:(0,N.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});C.displayName=j.aV.displayName;let D=(0,v.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),z=s.forwardRef((e,t)=>{let{side:a="right",className:s,children:r,...o}=e;return(0,n.jsxs)(E,{children:[(0,n.jsx)(C,{}),(0,n.jsx)(j.VY,{ref:t,className:(0,N.cn)(D({side:a}),s),...o,children:r})]})});z.displayName=j.VY.displayName;let _=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,N.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};_.displayName="SheetHeader";let S=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(j.Dx,{ref:t,className:(0,N.cn)("text-lg font-semibold text-foreground",a),...s})});S.displayName=j.Dx.displayName;let R=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(j.dk,{ref:t,className:(0,N.cn)("text-sm text-muted-foreground",a),...s})});R.displayName=j.dk.displayName;var A=a(16273),M=a(63769),U=a(56683),I=a(58410),F=a(2966),Z=a(38983),L=a(85448),P=a(86976);function O(){let e=(0,U._)(["rtl:**:[.rdp-button_next>svg]:rotate-180"],["rtl:**:[.rdp-button\\_next>svg]:rotate-180"]);return O=function(){return e},e}function T(){let e=(0,U._)(["rtl:**:[.rdp-button_previous>svg]:rotate-180"],["rtl:**:[.rdp-button\\_previous>svg]:rotate-180"]);return T=function(){return e},e}function V(e){let{className:t,classNames:a,showOutsideDays:s=!0,captionLayout:r="label",buttonVariant:o="ghost",formatters:l,components:d,...i}=e,c=(0,L.U)();return(0,n.jsx)(P._,{showOutsideDays:s,className:(0,N.cn)("bg-background group/calendar p-3 [--cell-size:2rem] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw(O()),String.raw(T()),t),captionLayout:r,formatters:{formatMonthDropdown:e=>e.toLocaleString("default",{month:"short"}),...l},classNames:{root:(0,N.cn)("w-fit",c.root),months:(0,N.cn)("relative flex flex-col gap-4 md:flex-row",c.months),month:(0,N.cn)("flex w-full flex-col gap-4",c.month),nav:(0,N.cn)("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",c.nav),button_previous:(0,N.cn)((0,A.d)({variant:o}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",c.button_previous),button_next:(0,N.cn)((0,A.d)({variant:o}),"h-[--cell-size] w-[--cell-size] select-none p-0 aria-disabled:opacity-50",c.button_next),month_caption:(0,N.cn)("flex h-[--cell-size] w-full items-center justify-center px-[--cell-size]",c.month_caption),dropdowns:(0,N.cn)("flex h-[--cell-size] w-full items-center justify-center gap-1.5 text-sm font-medium",c.dropdowns),dropdown_root:(0,N.cn)("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",c.dropdown_root),dropdown:(0,N.cn)("bg-popover absolute inset-0 opacity-0",c.dropdown),caption_label:(0,N.cn)("select-none font-medium","label"===r?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",c.caption_label),table:"w-full border-collapse",weekdays:(0,N.cn)("flex",c.weekdays),weekday:(0,N.cn)("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",c.weekday),week:(0,N.cn)("mt-2 flex w-full",c.week),week_number_header:(0,N.cn)("w-[--cell-size] select-none",c.week_number_header),week_number:(0,N.cn)("text-muted-foreground select-none text-[0.8rem]",c.week_number),day:(0,N.cn)("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",c.day),range_start:(0,N.cn)("bg-accent rounded-l-md",c.range_start),range_middle:(0,N.cn)("rounded-none",c.range_middle),range_end:(0,N.cn)("bg-accent rounded-r-md",c.range_end),today:(0,N.cn)("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",c.today),outside:(0,N.cn)("text-muted-foreground aria-selected:text-muted-foreground",c.outside),disabled:(0,N.cn)("text-muted-foreground opacity-50",c.disabled),hidden:(0,N.cn)("invisible",c.hidden),...a},components:{Root:e=>{let{className:t,rootRef:a,...s}=e;return(0,n.jsx)("div",{"data-slot":"calendar",ref:a,className:(0,N.cn)(t),...s})},Chevron:e=>{let{className:t,orientation:a,...s}=e;return"left"===a?(0,n.jsx)(I.Z,{className:(0,N.cn)("size-4",t),...s}):"right"===a?(0,n.jsx)(F.Z,{className:(0,N.cn)("size-4",t),...s}):(0,n.jsx)(Z.Z,{className:(0,N.cn)("size-4",t),...s})},DayButton:Y,WeekNumber:e=>{let{children:t,...a}=e;return(0,n.jsx)("td",{...a,children:(0,n.jsx)("div",{className:"flex size-[--cell-size] items-center justify-center text-center",children:t})})},...d},...i})}function Y(e){let{className:t,day:a,modifiers:r,...o}=e,l=(0,L.U)(),d=s.useRef(null);return s.useEffect(()=>{var e;r.focused&&(null===(e=d.current)||void 0===e||e.focus())},[r.focused]),(0,n.jsx)(A.z,{ref:d,variant:"ghost",size:"icon","data-day":a.date.toLocaleDateString(),"data-selected-single":r.selected&&!r.range_start&&!r.range_end&&!r.range_middle,"data-range-start":r.range_start,"data-range-end":r.range_end,"data-range-middle":r.range_middle,className:(0,N.cn)("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-[--cell-size] flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",l.day,t),...o})}var W=a(94087);let J=W.fC,B=W.xz,K=s.forwardRef((e,t)=>{let{className:a,align:s="center",sideOffset:r=4,...o}=e;return(0,n.jsx)(W.h_,{children:(0,n.jsx)(W.VY,{ref:t,align:s,sideOffset:r,className:(0,N.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",a),...o})})});K.displayName=W.VY.displayName;var G=a(3172),H=a(23727),Q=a(87354);function q(e){let{categories:t,onAdd:a,currency:o="Rs."}=e,[l,d]=(0,s.useState)(!1),[i,c]=(0,s.useState)(""),[u,x]=(0,s.useState)(null),[g,h]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[j,v]=(0,s.useState)(new Date),[N,E]=(0,s.useState)(!1),C=async()=>{if(i&&u&&g){E(!0);try{await a({amount:Number(i),category:u,merchant:g,note:y||void 0,date:j}),c(""),x(null),h(""),b(""),v(new Date),d(!1)}finally{E(!1)}}};return(0,n.jsxs)(w,{open:l,onOpenChange:d,children:[(0,n.jsx)(k,{asChild:!0,children:(0,n.jsx)(A.z,{size:"lg",className:"fixed bottom-24 right-4 h-14 w-14 rounded-full shadow-lg z-50",children:(0,n.jsx)(G.Z,{className:"h-6 w-6"})})}),(0,n.jsxs)(z,{side:"bottom",className:"h-[85vh] rounded-t-3xl !left-1/2 !right-auto !-translate-x-1/2 w-full max-w-md data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom flex flex-col",children:[(0,n.jsxs)(_,{className:"text-left flex-shrink-0",children:[(0,n.jsx)(S,{children:"Add Expense"}),(0,n.jsx)(R,{className:"sr-only",children:"Enter the amount, select a category, add a merchant name, optionally add a note and choose a date for this expense."})]}),(0,n.jsxs)("div",{className:"mt-6 space-y-6 overflow-y-auto flex-1 pr-2",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("span",{className:"text-2xl text-muted-foreground",children:o}),(0,n.jsx)("input",{type:"number",inputMode:"decimal",value:i,onChange:e=>c(e.target.value),placeholder:"0",className:"text-5xl font-bold text-center w-full bg-transparent border-none focus:outline-none",autoFocus:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Category"}),(0,n.jsx)("div",{className:"grid grid-cols-5 gap-3",children:t.map(e=>{let t=f[e.icon]||p.Z,a=u===e.id;return(0,n.jsxs)(r.E.button,{whileTap:{scale:.95},onClick:()=>x(e.id),className:"flex flex-col items-center gap-1 p-3 rounded-xl transition-colors ".concat(a?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:[(0,n.jsx)(t,{className:"w-6 h-6"}),(0,n.jsx)("span",{className:"text-xs truncate w-full text-center",children:e.name})]},e.id)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Date"}),(0,n.jsxs)(J,{children:[(0,n.jsx)(B,{asChild:!0,children:(0,n.jsxs)(A.z,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,n.jsx)(H.Z,{className:"mr-2 h-4 w-4"}),(0,m.WU)(j,"PPP")]})}),(0,n.jsx)(K,{className:"w-auto p-0",align:"start",children:(0,n.jsx)(V,{mode:"single",selected:j,onSelect:e=>{if(e){let t=new Date(j);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),v(t)}}})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Merchant"}),(0,n.jsx)(M.I,{value:g,onChange:e=>h(e.target.value),placeholder:"e.g., Keells, Dialog"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Note (optional)"}),(0,n.jsx)(M.I,{value:y,onChange:e=>b(e.target.value),placeholder:"Add a note about this expense"})]}),(0,n.jsx)(A.z,{className:"w-full h-12",size:"lg",disabled:!i||!u||!g||N,onClick:C,children:N?(0,n.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q.Z,{className:"mr-2 h-5 w-5"}),"Add Expense"]})})]})]})]})}var $=a(28685);let X=$.fC;$.xz;let ee=$.h_,et=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)($.aV,{className:(0,N.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:t})});et.displayName=$.aV.displayName;let ea=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsxs)(ee,{children:[(0,n.jsx)(et,{}),(0,n.jsx)($.VY,{ref:t,className:(0,N.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]})});ea.displayName=$.VY.displayName;let en=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,N.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};en.displayName="AlertDialogHeader";let es=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,N.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};es.displayName="AlertDialogFooter";let er=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)($.Dx,{ref:t,className:(0,N.cn)("text-lg font-semibold",a),...s})});er.displayName=$.Dx.displayName;let eo=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)($.dk,{ref:t,className:(0,N.cn)("text-sm text-muted-foreground",a),...s})});eo.displayName=$.dk.displayName;let el=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)($.aU,{ref:t,className:(0,N.cn)((0,A.d)(),a),...s})});el.displayName=$.aU.displayName;let ed=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)($.$j,{ref:t,className:(0,N.cn)((0,A.d)({variant:"outline"}),"mt-2 sm:mt-0",a),...s})});ed.displayName=$.$j.displayName;var ei=a(10997);function ec(e){let{expense:t,categories:a,currency:l="Rs.",open:d,onOpenChange:i,onUpdate:c,onDelete:u}=e,[x,g]=(0,s.useState)((null==t?void 0:t.amount.toString())||""),[h,y]=(0,s.useState)((null==t?void 0:t.category)||null),[b,j]=(0,s.useState)((null==t?void 0:t.merchant)||""),[v,N]=(0,s.useState)((null==t?void 0:t.note)||""),[k,E]=(0,s.useState)((null==t?void 0:t.date)||new Date),[C,D]=(0,s.useState)(!1),[U,I]=(0,s.useState)(!1),[F,Z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&(g(t.amount.toString()),y(t.category),j(t.merchant||""),N(t.note||""),E(t.date))},[t]);let L=async()=>{if(x&&h&&b&&t){D(!0);try{await c(t.id,{amount:Number(x),category:h,merchant:b,note:v||void 0,date:k}),o.A.success("Expense updated successfully"),i(!1)}catch(e){console.error("Error updating expense:",e),o.A.error("Failed to update expense. Please try again.")}finally{D(!1)}}},P=async()=>{if(t){I(!0),Z(!1);try{await u(t.id),o.A.success("Expense deleted successfully"),i(!1)}catch(e){console.error("Error deleting expense:",e),o.A.error("Failed to delete expense. Please try again.")}finally{I(!1)}}};return t?(0,n.jsxs)(w,{open:d,onOpenChange:i,children:[(0,n.jsxs)(z,{side:"bottom",className:"h-[85vh] rounded-t-3xl !left-1/2 !right-auto !-translate-x-1/2 w-full max-w-md data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom flex flex-col",children:[(0,n.jsxs)(_,{className:"text-left flex-shrink-0",children:[(0,n.jsx)(S,{children:"Edit Expense"}),(0,n.jsx)(R,{className:"sr-only",children:"Edit the amount, category, merchant, note, and date for this expense, or delete it permanently."})]}),(0,n.jsxs)("div",{className:"mt-6 space-y-6 overflow-y-auto flex-1 pr-2",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("span",{className:"text-2xl text-muted-foreground",children:l}),(0,n.jsx)("input",{type:"number",inputMode:"decimal",value:x,onChange:e=>g(e.target.value),placeholder:"0",className:"text-5xl font-bold text-center w-full bg-transparent border-none focus:outline-none",autoFocus:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-3",children:"Category"}),(0,n.jsx)("div",{className:"grid grid-cols-5 gap-3",children:a.map(e=>{let t=f[e.icon]||p.Z,a=h===e.id;return(0,n.jsxs)(r.E.button,{whileTap:{scale:.95},onClick:()=>y(e.id),className:"flex flex-col items-center gap-1 p-3 rounded-xl transition-colors ".concat(a?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"),children:[(0,n.jsx)(t,{className:"w-6 h-6"}),(0,n.jsx)("span",{className:"text-xs truncate w-full text-center",children:e.name})]},e.id)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Date"}),(0,n.jsxs)(J,{children:[(0,n.jsx)(B,{asChild:!0,children:(0,n.jsxs)(A.z,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[(0,n.jsx)(H.Z,{className:"mr-2 h-4 w-4"}),(0,m.WU)(k,"PPP")]})}),(0,n.jsx)(K,{className:"w-auto p-0",align:"start",children:(0,n.jsx)(V,{mode:"single",selected:k,onSelect:e=>{if(e){let t=new Date(k);t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),E(t)}}})})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Merchant"}),(0,n.jsx)(M.I,{value:b,onChange:e=>j(e.target.value),placeholder:"e.g., Keells, Dialog"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"Note (optional)"}),(0,n.jsx)(M.I,{value:v,onChange:e=>N(e.target.value),placeholder:"Add a note about this expense"})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(A.z,{className:"w-full h-12",size:"lg",disabled:!x||!h||!b||C,onClick:L,children:C?(0,n.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Q.Z,{className:"mr-2 h-5 w-5"}),"Update Expense"]})}),(0,n.jsx)(A.z,{variant:"destructive",className:"w-full h-12",size:"lg",disabled:U,onClick:()=>{Z(!0)},children:U?(0,n.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ei.Z,{className:"mr-2 h-5 w-5"}),"Delete Expense"]})})]})]})]}),(0,n.jsx)(X,{open:F,onOpenChange:Z,children:(0,n.jsxs)(ea,{children:[(0,n.jsxs)(en,{children:[(0,n.jsx)(er,{children:"Delete Expense"}),(0,n.jsx)(eo,{children:"Are you sure you want to delete this expense? This action cannot be undone."})]}),(0,n.jsxs)(es,{children:[(0,n.jsx)(ed,{children:"Cancel"}),(0,n.jsx)(el,{onClick:P,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]}):null}var eu=a(95731),em=a(10269);function ex(){let{user:e}=(0,l.a)(),{expenses:t,loading:a,summary:i,addExpense:c,updateExpense:u,deleteExpense:m}=(0,d.t)(),[f,p]=(0,s.useState)(null),[g,h]=(0,s.useState)(""),y=async e=>{try{await c({...e,date:e.date||new Date,source:"manual"}),o.A.success("Expense added successfully")}catch(e){console.error("Error adding expense:",e),o.A.error("Failed to add expense. Please try again.")}},j=async(e,t)=>{try{await u(e,t)}catch(e){console.error("Error updating expense:",e),o.A.error("Failed to update expense. Please try again.")}},v=async e=>{try{await m(e)}catch(e){console.error("Error deleting expense:",e),o.A.error("Failed to delete expense. Please try again.")}},N=(0,s.useMemo)(()=>{if(!g.trim())return t;let a=g.toLowerCase();return t.filter(t=>{var n,s,r;let o=(null===(n=t.merchant)||void 0===n?void 0:n.toLowerCase())||"",l=(null===(s=t.note)||void 0===s?void 0:s.toLowerCase())||"",d=(null==e?void 0:null===(r=e.settings.categories.find(e=>e.id===t.category))||void 0===r?void 0:r.name.toLowerCase())||"",i=t.amount.toString();return o.includes(a)||l.includes(a)||d.includes(a)||i.includes(a)})},[t,g,null==e?void 0:e.settings.categories]);return e?a?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,n.jsxs)(r.E.div,{initial:{opacity:0},animate:{opacity:1},className:"pb-24 px-4 pt-4 max-w-md mx-auto space-y-6",children:[(0,n.jsx)(x,{summary:i,currency:e.settings.currency}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(eu.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(M.I,{type:"text",placeholder:"Search by merchant, category, note, or amount...",value:g,onChange:e=>h(e.target.value),className:"pl-10 pr-10"}),g&&(0,n.jsx)("button",{onClick:()=>h(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:(0,n.jsx)(em.Z,{className:"h-4 w-4"})})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"font-semibold",children:"Recent Expenses"}),g&&(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:[N.length," result",1!==N.length?"s":""]})]}),(0,n.jsx)(b,{expenses:N,categories:e.settings.categories,currency:e.settings.currency,onEditExpense:p})]}),(0,n.jsx)(q,{categories:e.settings.categories,currency:e.settings.currency,onAdd:y}),(0,n.jsx)(ec,{expense:f,categories:e.settings.categories,currency:e.settings.currency,open:null!==f,onOpenChange:e=>!e&&p(null),onUpdate:j,onDelete:v})]}):null}},44638:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return c},a:function(){return u}});var n=a(27573),s=a(7653),r=a(31523),o=a(96228),l=a(94328);let d={monthlyLimit:1e5,billingDate:15,currency:"Rs.",categories:[{id:"groceries",name:"Groceries",icon:"ShoppingCart",color:"bg-green-500"},{id:"dining",name:"Dining",icon:"Utensils",color:"bg-orange-500"},{id:"fuel",name:"Fuel",icon:"Fuel",color:"bg-blue-500"},{id:"shopping",name:"Shopping",icon:"ShoppingBag",color:"bg-pink-500"},{id:"subscriptions",name:"Subscriptions",icon:"CreditCard",color:"bg-purple-500"},{id:"health",name:"Health",icon:"Heart",color:"bg-red-500"},{id:"entertainment",name:"Entertainment",icon:"Gamepad2",color:"bg-indigo-500"},{id:"transport",name:"Transport",icon:"Car",color:"bg-cyan-500"},{id:"utilities",name:"Utilities",icon:"Zap",color:"bg-yellow-500"},{id:"other",name:"Other",icon:"MoreHorizontal",color:"bg-gray-500"}],notificationsEnabled:!0,alertThresholds:[50,75,90,100],theme:"system"},i=(0,s.createContext)(null);function c(e){let{children:t}=e,[a,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=(0,r.Aj)(l.I8,async e=>{try{if(e){let t=await (0,o.QT)((0,o.JU)(l.db,"users",e.uid));if(t.exists())c({uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",settings:t.data().settings});else{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",settings:d};await (0,o.pl)((0,o.JU)(l.db,"users",e.uid),{settings:d,createdAt:new Date}),c(t)}}else c(null)}catch(e){console.error("Auth state change error:",e),c(null)}finally{m(!1)}});return()=>e()},[]);let x=async()=>{let e=new r.hJ;await (0,r.rh)(l.I8,e)},f=async()=>{await (0,r.w7)(l.I8)},p=async e=>{if(!a)return;let t={...a.settings,...e};await (0,o.pl)((0,o.JU)(l.db,"users",a.uid),{settings:t},{merge:!0}),c({...a,settings:t})};return(0,n.jsx)(i.Provider,{value:{user:a,loading:u,signIn:x,signOut:f,updateSettings:p},children:t})}let u=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},16273:function(e,t,a){"use strict";a.d(t,{d:function(){return d},z:function(){return i}});var n=a(27573),s=a(7653),r=a(8828),o=a(49289),l=a(19369);let d=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:i=!1,...c}=e,u=i?r.g7:"button";return(0,n.jsx)(u,{className:(0,l.cn)(d({variant:s,size:o,className:a})),ref:t,...c})});i.displayName="Button"},26798:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},Zb:function(){return o},aY:function(){return i},ll:function(){return d}});var n=a(27573),s=a(7653),r=a(19369);let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...s})});o.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("h3",{ref:t,className:(0,r.cn)("font-semibold leading-none tracking-tight",a),...s})});d.displayName="CardTitle",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...s})}).displayName="CardDescription";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...s})});i.displayName="CardContent",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...s})}).displayName="CardFooter"},63769:function(e,t,a){"use strict";a.d(t,{I:function(){return o}});var n=a(27573),s=a(7653),r=a(19369);let o=s.forwardRef((e,t)=>{let{className:a,type:s,...o}=e;return(0,n.jsx)("input",{type:s,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...o})});o.displayName="Input"},61638:function(e,t,a){"use strict";a.d(t,{t:function(){return x}});var n=a(44638),s=a(7653),r=a(93881),o=a(57646),l=a(62899),d=a(88483),i=a(21939),c=a(80849),u=a(94328),m=a(72824);function x(){let{user:e}=(0,n.a)();return function(e){let[t,a]=(0,s.useState)([]),[n,x]=(0,s.useState)(!0),f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,a=(0,r.b)(t),n=(0,o.G)(a,e);(0,l.R)(a,n)&&(n=(0,d.z)(n,-1));let s=(0,i.i)((0,d.z)((0,o.G)(n,e),1));s.setDate(s.getDate()-1);let u=(0,c.j)(s,n)+1,m=(0,c.j)(a,n)+1;return{startDate:n,endDate:s,daysTotal:u,daysElapsed:m,daysRemaining:Math.max(0,u-m)}}((null==e?void 0:e.settings.billingDate)||15);(0,s.useEffect)(()=>{if(!e){a([]),x(!1);return}x(!0);let t=(0,u.EQ)(e.uid,f.startDate,f.endDate,e=>{a(e),x(!1)});return()=>t()},[e,f.startDate.getTime(),f.endDate.getTime()]);let p={cycle:f,spent:t.reduce((e,t)=>e+t.amount,0),limit:(null==e?void 0:e.settings.monthlyLimit)||1e5,remaining:0,percentUsed:0,dailyBudget:0,todaySpent:t.filter(e=>(0,m.z)(e.date)).reduce((e,t)=>e+t.amount,0),isOverBudget:!1};return p.remaining=p.limit-p.spent,p.percentUsed=p.spent/p.limit*100,p.dailyBudget=f.daysRemaining>0?Math.floor(p.remaining/f.daysRemaining):0,p.isOverBudget=p.remaining<0,{expenses:t,loading:n,summary:p,addExpense:(0,s.useCallback)(async t=>{if(!e)throw Error("Not authenticated");return(0,u.ai)(e.uid,t)},[e]),updateExpense:(0,s.useCallback)(async(e,t)=>(0,u.E)(e,t),[]),deleteExpense:(0,s.useCallback)(async e=>(0,u.vu)(e),[])}}(e)}},19369:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var n=a(10607),s=a(25579);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,n.W)(t))}},94328:function(e,t,a){"use strict";a.d(t,{ai:function(){return c},I8:function(){return l},db:function(){return d},vu:function(){return m},EQ:function(){return x},E:function(){return u}});var n=a(42061),s=a(30801),r=a(90024);let o=0===(0,n.C6)().length?(0,n.ZF)({apiKey:"AIzaSyCV1t7oVNNZ2OA5gG3AlZIkL2mj9RGLIJY",authDomain:"spendwise-expense-tracker-app.firebaseapp.com",projectId:"spendwise-expense-tracker-app",storageBucket:"spendwise-expense-tracker-app.firebasestorage.app",messagingSenderId:"39820487912",appId:"1:39820487912:web:6c8ffc761a381cbb2e2d5d"}):(0,n.C6)()[0],l=(0,s.v0)(o),d=(0,r.ad)(o),i="expenses";async function c(e,t){let a={userId:e,amount:t.amount,category:t.category,merchant:t.merchant,source:t.source,date:r.EK.fromDate(t.date),createdAt:r.EK.now(),updatedAt:r.EK.now()};return t.note&&(a.note=t.note),(await (0,r.ET)((0,r.hJ)(d,i),a)).id}async function u(e,t){let a=(0,r.JU)(d,i,e),n={updatedAt:r.EK.now()};void 0!==t.amount&&(n.amount=t.amount),void 0!==t.category&&(n.category=t.category),void 0!==t.merchant&&(n.merchant=t.merchant),void 0!==t.source&&(n.source=t.source),void 0!==t.note&&t.note&&(n.note=t.note),t.date&&(n.date=r.EK.fromDate(t.date)),await (0,r.r7)(a,n)}async function m(e){await (0,r.oe)((0,r.JU)(d,i,e))}function x(e,t,a,n){let s=(0,r.IO)((0,r.hJ)(d,i),(0,r.ar)("userId","==",e),(0,r.Xo)("date","desc"));return(0,r.cf)(s,e=>{n(e.docs.map(e=>{let t=e.data();return{id:e.id,userId:t.userId,amount:t.amount,category:t.category,merchant:t.merchant,note:t.note,date:t.date.toDate(),createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),source:t.source}}).filter(e=>e.date>=t&&e.date<=a))})}},3592:function(e,t,a){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Rs.";return"".concat(t," ").concat(e.toLocaleString("en-IN"))}a.d(t,{x:function(){return n}})}},function(e){e.O(0,[415,630,547,181,437,71,6,883,336,787,3,293,528,744],function(){return e(e.s=70901)}),_N_E=e.O()}]);