(()=>{var e={};e.id=567,e.ids=[567],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},73507:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>c}),s(48283),s(39483),s(87824),s(94048);var r=s(93282),a=s(5736),n=s(93906),i=s.n(n),l=s(36880),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let c=["",{children:["(dashboard)",{children:["insights",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,48283)),"/Users/yazhodha/expense-tracker/apps/web/app/(dashboard)/insights/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,39483)),"/Users/yazhodha/expense-tracker/apps/web/app/(dashboard)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,87824,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,94048)),"/Users/yazhodha/expense-tracker/apps/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,87824,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/yazhodha/expense-tracker/apps/web/app/(dashboard)/insights/page.tsx"],u="/(dashboard)/insights/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/insights/page",pathname:"/insights",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},89938:(e,t,s)=>{Promise.resolve().then(s.bind(s,2237))},2237:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var r=s(73227),a=s(23677),n=s(47226),i=s(66287),l=s(10636),d=s(38159),c=s(19068),o=s(23044),u=s(92698),x=s(91009),m=s(97464),p=s(82183),h=s(39790),g=s(20426),f=s(24763),j=s(38880);function y(){let{user:e}=(0,o.a)(),{expenses:t,loading:s,summary:y}=(0,u.t)(),b=(0,a.useMemo)(()=>{if(!e)return[];let s=new Map;return t.forEach(t=>{let r=e.settings.categories.find(e=>e.id===t.category);if(r){let e=s.get(r.id)||{name:r.name,icon:r.icon,total:0,count:0};s.set(r.id,{...e,total:e.total+t.amount,count:e.count+1})}}),Array.from(s.values()).sort((e,t)=>t.total-e.total)},[t,e]),N=(0,a.useMemo)(()=>{let e=new Date;return(function(e,t){let{start:s,end:r}=(0,i.T)(void 0,e),a=+s>+r,n=a?+s:+r,d=a?r:s;d.setHours(0,0,0,0);let c=(void 0)??1;if(!c)return[];c<0&&(c=-c,a=!a);let o=[];for(;+d<=n;)o.push((0,l.L)(s,d)),d.setDate(d.getDate()+c),d.setHours(0,0,0,0);return a?o.reverse():o})({start:new Date(e.getTime()-5184e5),end:e}).map(e=>{let s=t.filter(t=>new Date(t.date).toDateString()===e.toDateString());return{date:e,total:s.reduce((e,t)=>e+t.amount,0),count:s.length}})},[t]),v=(0,a.useMemo)(()=>{let e=new Map;t.forEach(t=>{t.merchant&&e.set(t.merchant,(e.get(t.merchant)||0)+t.amount)});let s={name:"N/A",total:0};return e.forEach((e,t)=>{e>s.total&&(s={name:t,total:e})}),s},[t]),w=(0,a.useMemo)(()=>0===y.cycle.daysElapsed?0:Math.round(y.spent/y.cycle.daysElapsed),[y]);if(!e)return null;if(s)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})});let q=b[0]?.total||1;return(0,r.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"pb-24 px-4 pt-4 max-w-md mx-auto space-y-6",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Insights"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(x.Zb,{children:(0,r.jsxs)(x.aY,{className:"pt-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[r.jsx(m.Z,{className:"w-4 h-4"}),r.jsx("p",{className:"text-sm",children:"Avg Daily"})]}),(0,r.jsxs)("p",{className:"text-2xl font-bold",children:[e.settings.currency,w.toLocaleString()]})]})}),r.jsx(x.Zb,{children:(0,r.jsxs)(x.aY,{className:"pt-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground mb-1",children:[r.jsx(p.Z,{className:"w-4 h-4"}),r.jsx("p",{className:"text-sm",children:"Total Expenses"})]}),r.jsx("p",{className:"text-2xl font-bold",children:t.length})]})})]}),(0,r.jsxs)(x.Zb,{children:[r.jsx(x.Ol,{children:r.jsx(x.ll,{children:"Spending by Category"})}),r.jsx(x.aY,{className:"space-y-4",children:0===b.length?r.jsx("p",{className:"text-muted-foreground text-sm",children:"No expenses yet in this billing cycle."}):b.map(t=>{let s=f[t.icon]||j.Z,a=t.total/y.spent*100,n=t.total/q*100;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(s,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:t.name})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-sm font-semibold",children:[e.settings.currency,t.total.toLocaleString()]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.toFixed(1),"%"]})]})]}),r.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary rounded-full transition-all",style:{width:`${n}%`}})}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.count," transaction",1!==t.count?"s":""]})]},t.name)})})]}),(0,r.jsxs)(x.Zb,{children:[r.jsx(x.Ol,{children:r.jsx(x.ll,{children:"Last 7 Days"})}),r.jsx(x.aY,{children:r.jsx("div",{className:"space-y-3",children:N.map((t,s)=>{let a=Math.max(...N.map(e=>e.total),1),n=t.total/a*100,i=(0,d.z)(t.date);return(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:i?"font-semibold":"text-muted-foreground",children:(0,c.WU)(t.date,"EEE, MMM d")}),(0,r.jsxs)("span",{className:"font-medium",children:[e.settings.currency,t.total.toLocaleString()]})]}),r.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full rounded-full transition-all ${i?"bg-primary":"bg-primary/60"}`,style:{width:`${n}%`}})})]},s)})})})]}),(0,r.jsxs)(x.Zb,{children:[r.jsx(x.Ol,{children:r.jsx(x.ll,{children:"Top Merchant"})}),r.jsx(x.aY,{children:"N/A"===v.name?r.jsx("p",{className:"text-muted-foreground text-sm",children:"No merchant data available."}):(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-lg font-semibold",children:v.name}),(0,r.jsxs)("p",{className:"text-xl font-bold text-primary",children:[e.settings.currency,v.total.toLocaleString()]})]})})]}),(0,r.jsxs)(x.Zb,{children:[r.jsx(x.Ol,{children:r.jsx(x.ll,{children:"Budget Health"})}),(0,r.jsxs)(x.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Status"}),r.jsx("p",{className:`text-2xl font-bold ${y.isOverBudget?"text-destructive":"text-green-600"}`,children:y.isOverBudget?"Over Budget":"On Track"})]}),y.isOverBudget?r.jsx(h.Z,{className:"w-8 h-8 text-destructive"}):r.jsx(g.Z,{className:"w-8 h-8 text-green-600"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Budget Used"}),(0,r.jsxs)("span",{className:"font-medium",children:[y.percentUsed.toFixed(1),"%"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Days Remaining"}),(0,r.jsxs)("span",{className:"font-medium",children:[y.cycle.daysRemaining," days"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Recommended Daily Budget"}),(0,r.jsxs)("span",{className:"font-medium",children:[e.settings.currency,y.dailyBudget.toLocaleString()]})]})]})]})]})]})}},92698:(e,t,s)=>{"use strict";s.d(t,{t:()=>m});var r=s(23044),a=s(23677),n=s(88179),i=s(99302),l=s(39905),d=s(28311),c=s(95810),o=s(55997),u=s(84863),x=s(38159);function m(){let{user:e}=(0,r.a)();return function(e){let[t,s]=(0,a.useState)([]),[r,m]=(0,a.useState)(!0),p=function(e,t=new Date){let s=(0,n.b)(t),r=(0,i.G)(s,e);(0,l.R)(s,r)&&(r=(0,d.z)(r,-1));let a=(0,c.i)((0,d.z)((0,i.G)(r,e),1));a.setDate(a.getDate()-1);let u=(0,o.j)(a,r)+1,x=(0,o.j)(s,r)+1;return{startDate:r,endDate:a,daysTotal:u,daysElapsed:x,daysRemaining:Math.max(0,u-x)}}(e?.settings.billingDate||15);(0,a.useEffect)(()=>{if(!e){s([]),m(!1);return}m(!0);let t=(0,u.EQ)(e.uid,p.startDate,p.endDate,e=>{s(e),m(!1)});return()=>t()},[e,p.startDate.getTime(),p.endDate.getTime()]);let h={cycle:p,spent:t.reduce((e,t)=>e+t.amount,0),limit:e?.settings.monthlyLimit||1e5,remaining:0,percentUsed:0,dailyBudget:0,todaySpent:t.filter(e=>(0,x.z)(e.date)).reduce((e,t)=>e+t.amount,0),isOverBudget:!1};return h.remaining=h.limit-h.spent,h.percentUsed=h.spent/h.limit*100,h.dailyBudget=p.daysRemaining>0?Math.floor(h.remaining/p.daysRemaining):0,h.isOverBudget=h.remaining<0,{expenses:t,loading:r,summary:h,addExpense:(0,a.useCallback)(async t=>{if(!e)throw Error("Not authenticated");return(0,u.ai)(e.uid,t)},[e]),updateExpense:(0,a.useCallback)(async(e,t)=>(0,u.E)(e,t),[]),deleteExpense:(0,a.useCallback)(async e=>(0,u.vu)(e),[])}}(e)}},48283:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(53189).createProxy)(String.raw`/Users/yazhodha/expense-tracker/apps/web/app/(dashboard)/insights/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[522,218,167,447,793,806],()=>s(73507));module.exports=r})();