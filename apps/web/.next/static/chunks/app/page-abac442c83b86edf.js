(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{36749:function(e,t,n){Promise.resolve().then(n.bind(n,5054))},5054:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(27573),a=n(7653),o=n(81695),i=n(44638);function s(){let{user:e,loading:t}=(0,i.a)(),n=(0,o.useRouter)();return(0,a.useEffect)(()=>{t||n.replace(e?"/dashboard":"/login")},[e,t,n]),(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}},44638:function(e,t,n){"use strict";n.d(t,{AuthProvider:function(){return d},a:function(){return l}});var r=n(27573),a=n(7653),o=n(31523),i=n(96228),s=n(94328);let u={monthlyLimit:1e5,billingDate:15,currency:"Rs.",categories:[{id:"groceries",name:"Groceries",icon:"ShoppingCart",color:"bg-green-500"},{id:"dining",name:"Dining",icon:"Utensils",color:"bg-orange-500"},{id:"fuel",name:"Fuel",icon:"Fuel",color:"bg-blue-500"},{id:"shopping",name:"Shopping",icon:"ShoppingBag",color:"bg-pink-500"},{id:"subscriptions",name:"Subscriptions",icon:"CreditCard",color:"bg-purple-500"},{id:"health",name:"Health",icon:"Heart",color:"bg-red-500"},{id:"entertainment",name:"Entertainment",icon:"Gamepad2",color:"bg-indigo-500"},{id:"transport",name:"Transport",icon:"Car",color:"bg-cyan-500"},{id:"utilities",name:"Utilities",icon:"Zap",color:"bg-yellow-500"},{id:"other",name:"Other",icon:"MoreHorizontal",color:"bg-gray-500"}],notificationsEnabled:!0,alertThresholds:[50,75,90,100],theme:"system"},c=(0,a.createContext)(null);function d(e){let{children:t}=e,[n,d]=(0,a.useState)(null),[l,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,o.Aj)(s.I8,async e=>{try{if(e){let t=await (0,i.QT)((0,i.JU)(s.db,"users",e.uid));if(t.exists())d({uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",settings:t.data().settings});else{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL||"",settings:u};await (0,i.pl)((0,i.JU)(s.db,"users",e.uid),{settings:u,createdAt:new Date}),d(t)}}else d(null)}catch(e){console.error("Auth state change error:",e),d(null)}finally{p(!1)}});return()=>e()},[]);let m=async()=>{let e=new o.hJ;await (0,o.rh)(s.I8,e)},h=async()=>{await (0,o.w7)(s.I8)},f=async e=>{if(!n)return;let t={...n.settings,...e};await (0,i.pl)((0,i.JU)(s.db,"users",n.uid),{settings:t},{merge:!0}),d({...n,settings:t})};return(0,r.jsx)(c.Provider,{value:{user:n,loading:l,signIn:m,signOut:h,updateSettings:f},children:t})}let l=()=>{let e=(0,a.useContext)(c);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},81695:function(e,t,n){"use strict";var r=n(21219);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}})},94328:function(e,t,n){"use strict";n.d(t,{ai:function(){return d},I8:function(){return s},db:function(){return u},vu:function(){return p},EQ:function(){return m},E:function(){return l}});var r=n(42061),a=n(30801),o=n(90024);let i=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyCV1t7oVNNZ2OA5gG3AlZIkL2mj9RGLIJY",authDomain:"spendwise-expense-tracker-app.firebaseapp.com",projectId:"spendwise-expense-tracker-app",storageBucket:"spendwise-expense-tracker-app.firebasestorage.app",messagingSenderId:"39820487912",appId:"1:39820487912:web:6c8ffc761a381cbb2e2d5d"}):(0,r.C6)()[0],s=(0,a.v0)(i),u=(0,o.ad)(i),c="expenses";async function d(e,t){let n={userId:e,amount:t.amount,category:t.category,merchant:t.merchant,source:t.source,date:o.EK.fromDate(t.date),createdAt:o.EK.now(),updatedAt:o.EK.now()};return t.note&&(n.note=t.note),(await (0,o.ET)((0,o.hJ)(u,c),n)).id}async function l(e,t){let n=(0,o.JU)(u,c,e),r={updatedAt:o.EK.now()};void 0!==t.amount&&(r.amount=t.amount),void 0!==t.category&&(r.category=t.category),void 0!==t.merchant&&(r.merchant=t.merchant),void 0!==t.source&&(r.source=t.source),void 0!==t.note&&t.note&&(r.note=t.note),t.date&&(r.date=o.EK.fromDate(t.date)),await (0,o.r7)(n,r)}async function p(e){await (0,o.oe)((0,o.JU)(u,c,e))}function m(e,t,n,r){let a=(0,o.IO)((0,o.hJ)(u,c),(0,o.ar)("userId","==",e),(0,o.Xo)("date","desc"));return(0,o.cf)(a,e=>{r(e.docs.map(e=>{let t=e.data();return{id:e.id,userId:t.userId,amount:t.amount,category:t.category,merchant:t.merchant,note:t.note,date:t.date.toDate(),createdAt:t.createdAt.toDate(),updatedAt:t.updatedAt.toDate(),source:t.source}}).filter(e=>e.date>=t&&e.date<=n))})}}},function(e){e.O(0,[415,630,547,181,71,293,528,744],function(){return e(e.s=36749)}),_N_E=e.O()}]);